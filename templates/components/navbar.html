{% load static %}
<!-- Navigation -->
<nav class="glass fixed top-0 left-0 right-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16">
      <div class="flex items-center">
        <a href="{% url 'store:home' %}" class="font-['Pacifico'] text-2xl text-white">Kairos</a>
      </div>
      <div class="hidden md:flex items-center space-x-8">
        <a href="{% url 'store:home' %}" class="text-white hover:text-primary transition-colors">Home</a>
        <a href="{% url 'store:beats' %}" class="text-white hover:text-primary transition-colors">Beats</a>
        {% if user.is_authenticated %}
          <a href="{% url 'store:dashboard' %}" class="text-white hover:text-primary transition-colors">Dashboard</a>
        {% endif %}
      </div>
      <div class="flex items-center space-x-4">
        <div class="w-10 h-10 flex items-center justify-center relative cursor-pointer" id="cartButton">
          <i class="ri-shopping-cart-line text-white ri-lg"></i>
          <span class="absolute -top-1 -right-1 bg-primary text-white text-xs w-5 h-5 flex items-center justify-center rounded-full">3</span>
        </div>
        {% if user.is_authenticated %}
          <button onclick="handleLogout()" class="w-10 h-10 flex items-center justify-center bg-gray-700 rounded-full cursor-pointer">
            <i class="ri-logout-box-line text-white ri-lg"></i>
          </button>
        {% else %}
          <button onclick="showLoginModal()" class="w-10 h-10 flex items-center justify-center bg-gray-700 rounded-full cursor-pointer">
            <i class="ri-user-line text-white ri-lg"></i>
          </button>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<script>
  async function handleLogout() {
    try {
      const response = await fetch('{% url "store:logout" %}', {
        method: 'POST',
        headers: {
          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
          'Content-Type': 'application/json'
        }
      });
      
      const data = await response.json();
      
      if (response.ok) {
        showToast(data.message);
        window.location.reload();
      } else {
        showToast(data.message, 'error');
      }
    } catch (error) {
      showToast({ message: 'An error occurred. Please try again.' }, 'error');
    }
  }
</script> 